# ğŸ“Š **2.8.3 Standard deviation, percentile and median**

## ğŸ” **Key distribution metrics**
### ğŸ“ **Standard deviation (Ïƒ)**
is a measure of the spread of data relative to the average
- Higher value = higher variability
- Formula:
`Ïƒ = âˆš(Î£(xáµ¢ - Î¼)2 / N)`
where Î¼ is the average, N is the number of observations

### ğŸ“Œ **Percentiles**
| Percentile | Description                                  | Usage example              |
| ---------- | -------------------------------------------- | -------------------------- |
| 50th       | **Median** is the middle of the distribution | Baseline performance level |
| 90th       | 10% worst values                             | Tail analysis              |
| 99th       | 1% of the slowest queries                    | SLA metrics                |
| 99.9th     | 0.1% of extreme cases                        | Search for rare anomalies  |

**SLA example**:
"99th percentile delay < 200 ms" means that 99% of requests are executed faster than 200 ms.

# 2.8.4 Coefficient of variation (CoV)**
is the ratio of the standard deviation to the mean:
`CoV = Ïƒ / Î¼`
- **Interpretation**:
- CoV=25%: Moderate variability
  - CoV<10%: A stable system
- Alternative: **z-value** (how much Ïƒ is the value from Î¼)

## ğŸ« **2.8.5 Multimodal distributions**
**Problem**: Classical metrics don't work well for:
- **Bimodal** distributions (e.g. cache hits/missions)
- **Multimodal** scenarios

**Practical example**:
Allocation of disk operation delays:
``text
Mode 1 (cache hits):  0-1 ms â”€â”€â”€â”€â”€ 
Mode 2 (read from disk): 7-8 ms â”€â”€â”€
Average: 3.3 ms â† Useless metric!
``

> ğŸ’¡ **Moral**: "A person who drowned in a river with an average depth of 15 cm will not appreciate your metrics" (c) W.I.E. Gates

## ğŸš¨ **2.8.6 Outliers**
**Features**:
- Rare extreme values (for example, delays >1000 ms at a rate of 10 ms)
- Sources:
- TCP timeouts
- Competition for resources
  - Equipment failures

**Detection methods**:
1. **Maximum value** (but shows only the worst case)
2. **99.9th percentile**
3. **Median and average comparison**:
``python
   if (mean - median) / median > 0.3:
print("Suspected outliers!")
``

## ğŸ“Š **Visualization is the key to understanding**
For complex distributions, use:
- **Histograms** (reveal the modes)
- **Box-plot** (shows median, quantiles, outliers)
- **Percentile graphs** (for example, delay heatmap)

**Example for a web application**:
``text
Latency Distribution (ms)
P50:   45   â”ƒ
P90:  120   â”ƒâ–“
P99: 350 â”ƒâ–“â–“â–“â–“
P99.9:1200 â”ƒâ–“â–“â–“â–“â–“â–“â–“ ( emissions!)
``

## ğŸ›  **Practical recommendations**
1. For SLA, focus on the **99th percentile**
2. Always compare **median and average**
3. In case of anomalies, build **histograms**
4. For network systems, monitor **99.9th percentile**

> âš ï¸ **Important**: Averages can be misleading. Always specify the distribution form!